(this.webpackJsonpluku1=this.webpackJsonpluku1||[]).push([[0],{18:function(e,t,n){e.exports=n(41)},41:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),u=n(15),c=n.n(u),o=n(17),i=n(16),l=n(3),s=function(e){var t=e.text,n=e.value,r=e.setFn;return a.a.createElement("div",null,t," ",a.a.createElement("input",{value:n,onChange:function(e){return r(e.target.value)}}))},f=function(e){return a.a.createElement("div",null,a.a.createElement(s,e))},m=function(e){var t=e.handleSubmit,n=e.newName,r=e.newNumber,u=e.setNewName,c=e.setNewNumber;return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:t},a.a.createElement(s,{text:"name:",value:n,setFn:u}),a.a.createElement(s,{text:"number:",value:r,setFn:c}),a.a.createElement("button",{type:"submit"},"add")))},d=function(e){var t=e.message;return null===t?null:a.a.createElement("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}},t)},b=n(2),p=n.n(b),v=n(5),w=n(4),h=n.n(w),O="/api/persons",j=function(){var e=Object(v.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get(O);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(v.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post(O,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(v.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.put("".concat(O,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var N=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],u=t[1],c=Object(r.useState)(""),s=Object(l.a)(c,2),b=s[0],p=s[1],v=Object(r.useState)(""),w=Object(l.a)(v,2),N=w[0],S=w[1],k=Object(r.useState)(""),x=Object(l.a)(k,2),P=x[0],D=x[1],C=Object(r.useState)(null),F=Object(l.a)(C,2),A=F[0],B=F[1];Object(r.useEffect)((function(){j().then((function(e){return u(e)}))}),[]);var J=function(e){B(e),setTimeout((function(){B(null)}),3e3)},L=function(e){window.confirm("Sure about eliminating a real person?")?(function(e){return h.a.delete("".concat(O,"/").concat(e))}(e).catch((function(e){return J("An error occured!")})),u(n.filter((function(t){return t.id!==e}))),J("Deletion successful!")):J("Deletion canceled!")};return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),A&&a.a.createElement(d,{message:A}),a.a.createElement(f,{text:"filter shown with:",value:P,setFn:D}),a.a.createElement("h2",null,"Add a New"),a.a.createElement(m,{handleSubmit:function(e){e.preventDefault();var t=n.find((function(e){return e.name===b}));if(t){if(!window.confirm("Name ".concat(b," already exists, replace with a new number?")))return void J("Update canceled!");y(t.id,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{number:N})).then((function(e){return u(n.map((function(n){return n.id!==t.id?n:e})))})).catch((function(e){return J("Could not update information from ".concat(t.name))})),J("Phone number updated")}else E({name:b,number:N}).then((function(e){return u([].concat(Object(o.a)(n),[e]))})).catch((function(e){return J("An error occured!")})),J("New person added");p(""),S("")},newName:b,newNumber:N,setNewName:p,setNewNumber:S}),a.a.createElement("h2",null,"Numbers"),n.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())})).map((function(e){return a.a.createElement("p",{key:e.id},e.name," ",e.number," ",a.a.createElement("button",{onClick:L.bind(void 0,e.id)},"delete"))})))};c.a.render(a.a.createElement(N,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.00898fd4.chunk.js.map